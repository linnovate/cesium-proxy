<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <script src="/Cesium/Cesium.js"></script>
  <link href="/Cesium/Widgets/widgets.css" rel="stylesheet">
</head>

<body style="margin: 0;">
  <div id="cesiumContainer" style="height: 100vh"></div>
  <script>
    (async () => {
      // Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmYmIyOGVjYi02Yjg1LTRhNjctOTI3Ny1lNDRlOWNkODRkZGMiLCJpZCI6Mjg4NDU5LCJpYXQiOjE3NDMwOTQ3MTR9.XHNKSuj3hxveAp3RAIQ74EpD0SEPxaOOgC8CmGgBL3g';
      const viewer = new Cesium.Viewer('cesiumContainer', {
        animation: false,
        timeline: false,
        baseLayerPicker: false,
        geocoder: true,
        homeButton: false,
        // sceneModePicker: false,
        navigationHelpButton: false,
        navigationInstructionsInitiallyVisible: false,
        fullscreenButton: false,
        baseLayer: false,
      });

      /**
        * Use 3DTileset as local service
        */
      const tileset = await Cesium.Cesium3DTileset.fromUrl('http://3dtiles.map.localhost/tileset.json')
      viewer.scene.primitives.add(tileset);
      viewer.flyTo(tileset)

      /**
        * Use Imagery as WMS proxy
        */
      viewer.imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider({
        url: "http://mapproxy.map.localhost/service?", 
        layers: 'mapproxy',
        parameters: {
          layers: "imagery",
          format: 'image/png',
        }
      }));

    })()
  </script>
  </div>
</body>

</html>